
Example of run with HVT vbf vs background


===  24-01-21

for mass in 250 300 350 400 450 500 600 700 800 900 1000 ;
do for n in 0 3 ;
    do python3 OPT_VBS_NN.py --mass_points $mass --model HVT --dropout=0.20 --lr=0.013 --patience=18 --numn=10 --numlayer=3 --epochs=100 --Findex $n --nFold 4 --sdir HVT_24-01-21/m$mass;
        done;
    done  &> log/training_HVT_24-01-21


   --> produces ControlPlots/HVT_24-01-21/m250... 1000/


--------------

			--> choose  masses on which to apply the training. here: 250, 350, 400, 600 
			and produce outputs root files for train ing with  masses 250, 400 and 600 

	in config_OPT_NN.py, array "shortlist" ; include masses and backgrounds used for training.

 	shortList= [307730,  307732, 309532, 307734] # masses 250, 350, 400, 600

     list_apply_bkg = [
       'resonance.364253_Sherpa_222_NNPDF30NNLO_lllv_ntuples.0.root',
       'resonance.364742_MGPy8EG_NNPDF30NLO_A14NNPDF23LO_lvlljjEW6_SFPlus_ntuples.root'
        ]

for mass in 250 400 600;
do  input="";
    for path in OutputModel/HVT_24-01-21/m$mass/sig*NN.h5;
    do  model=HVT_24-01-21/m$mass/${path##*/};
        input+=$model",";
        done;
    python3 Apply_NN.py --input ${path##*/} --sdir HVT_24-01-21/m$mass; 
    done  &> log/Apply_HVT_24-01-21

	==>> produces:  OutputRoot/HVT_24-01-21/m250,400,600 /HVT_*.root  (masses 250, 350, 400, 600 and backgs.)
                                    OutputRoot/HVT_24-01-21/m350/HVT_*.root  
------------

				 >> edit  pSignal_cv_plotting.C (see "parameters to edit")
//========================== PARAMETERS TO EDIT ================================
string savedir = "ControlPlots/HVT_24-01-21/";   // MAKE SURE PSIGNAL EXISTS IN SUBDIRECTORY
string rdir   = "OutputRoot/HVT_24-01-21/";       // Subdirectory containing the root files produced by appluing the NN
string model  = "HVT";            // Model used
string opt_ID = "_";    // Optional file name identification
//=======================================================================

root -l pSignal_cv_plotting.C

     	==>>  produces ControlPlots/HVT_24-01-21/m250, 400, 600/pSig_integrals_HVT_m250_and_bckgrd_.png, C


------------
  --> edit nn_per_mass.C and set:
  vector<int> masses{0,250,350,400,600};  // backg + masses for which NN as applied

python3   nn_per_mass.py "HVT_24-01-21" "m250" "pSignal" true "HVT"

Info in <TCanvas::Print>: png file ControlPlots/HVT_24-01-21/m250/NN_output_pSignal.png has been created
Info in <TCanvas::SaveSource>: C++ Macro file: ControlPlots/HVT_24-01-21/m250/NN_output_pSignal.C has been generated
Info in <TCanvas::Print>: png file ControlPlots/HVT_24-01-21/m250/NN_output_significance.png has been created
Info in <TCanvas::SaveSource>: C++ Macro file: ControlPlots/HVT_24-01-21/m250/NN_output_significance.C has been generated
Info in <TCanvas::Print>: png file ControlPlots/HVT_24-01-21/m250/NN_output_AMS_curves.png has been created
Info in <TCanvas::SaveSource>: C++ Macro file: ControlPlots/HVT_24-01-21/m250/NN_output_AMS_curves.C has been generated
  also: NN_output_CbvsNN.csv


------------

cd ControlPlots/HVT_24-01-21/m250 
display -density 60 'vid:*.png'

------------