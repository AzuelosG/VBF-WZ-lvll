
  based on   Guillaume's code: ~/lvll/MVA/VBF-WZ-lvll_GL
  ------------------------------------------------------------------------

https://github.com/GLaurin/VBF-WZ-lvll

git clone https://github.com//VBF-WZ-lvll.git VBF-WZ-lvll_test

>> created directory Inputs with latest ntuple files



31-12-2020

--> in  OPT_VBS_NN.py:
if args.model=="QQ":  mass_list = [600,1000]   # sig_HVT list, same masses for signal and background

for mass in 600 1000  ;
do for n in 0 1 ;
    do python3 OPT_VBS_NN.py --mass_points $mass --model QQ --dropout=0.20 --lr=0.013 --patience=18 --numn=10 --numlayer=3 --epochs=100 --Findex $n --nFold 2 --sdir QQ_31-12-20/m$mass;
        done;
    done

  ==>> produces ControlPlots/QQ_31-12-20/m600/
								   /m1000
		            OutputModel/QQ_31_12-20/m600/*pkl, *.h5
			                                             /m1000/*pkl, *h5

-----

      --> in config_OPT_NN.py: 

    list_apply_bkg = [  'resonance.302267_MadGraphPythia8EvtGen_A14NNPDF23LO_HVT_Agv1_VcWZ_lvll_m0600_ntuples.root']   # QQ HVT, 600 GeV
    shortList= [307734]   # 600 GeV   HVT signal

for path in OutputModel/QQ_31-12-20/m600/sig*NN.h5
    do python3 Apply_NN.py --input  ${path##*/}    --sdir QQ_31-12-20/m600
    done

or

python3 Apply_NN.py --input 'QQ_31-12-20/m600/sigvalid_QQ_m[600]_S0_CVp0.000_F0o2_NN.h5'  --sdir QQ_31-12-20/m600

	==>> produces:   OutputRoot/QQ_31-12-20/m600/QQ_resonance.302267_MadGraphPythia8EvtGen_A14NNPDF23LO_HVT_Agv1_VcWZ_lvll_m0600_ntuples.root
	                             OutputRoot/QQ_31-12-20/m600/QQ_resonance.307734_MGPy8EG_A14NNPDF23LO_vbfHVT_Agv1_VzWZ_lvll_m0600_ntuples.root

------------

				 >> edit  pSignal_cv_plotting_QQ.C (see "parameters to edit")
//========================== PARAMETERS TO EDIT ================================
string savedir = "ControlPlots/QQ_31-12-20/";   // MAKE SURE PSIGNAL EXISTS IN SUBDIRECTORY
string rdir   = "OutputRoot/QQ_3112-20/";       // Subdirectory containing the root files produced by appluing the NN
string model  = "QQ";            // Model used
string opt_ID = "_";    // Optional file name identification
//=======================================================================

root -l pSignal_cv_plotting_QQ.C

  -->> produces   ControlPlots/QQ_31-12-20/m600/pSig_integrals_QQ_m600_and_bckgrd_.C 
                           ControlPlots/QQ_31-12-20/m600/pSig_integrals_QQ_m600_and_bckgrd_.png

------------
  --> edit nn_per_mass.C and set:
  vector<int> masses{0,600};

python3   nn_per_mass.py "QQ_31-12-20" "m600" "pSignal"  true "QQ"

[atlas11] ~/lvll/MVA/VBF-WZ-lvll_GL > python3   nn_per_mass.py "QQ_31-12-20" "m600" "pSignal"  true "QQ"

Info in <TCanvas::Print>: png file ControlPlots/QQ_31-12-20/m600/NN_output_pSignal.png has been created
Info in <TCanvas::SaveSource>: C++ Macro file: ControlPlots/QQ_31-12-20/m600/NN_output_pSignal.C has been generated

Info in <TCanvas::Print>: png file ControlPlots/QQ_31-12-20/m600/NN_output_significance.png has been created
Info in <TCanvas::SaveSource>: C++ Macro file: ControlPlots/QQ_31-12-20/m600/NN_output_significance.C has been generated

Info in <TCanvas::Print>: png file ControlPlots/QQ_31-12-20/m600/NN_output_AMS_curves.png has been created
Info in <TCanvas::SaveSource>: C++ Macro file: ControlPlots/QQ_31-12-20/m600/NN_output_AMS_curves.C has been generated

Info in <TCanvas::Print>: png file ControlPlots/QQ_31-12-20/m600/NN_output_QQ_pSignal.png has been created
Info in <TCanvas::SaveSource>: C++ Macro file: ControlPlots/QQ_31-12-20/m600/NN_output_QQ_pSignal.C has been generated

